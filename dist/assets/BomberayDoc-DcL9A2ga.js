import{a as te,b as le,c as se,d as ae,e as oe,f as ne,g as ie,h as re,i as ue,j as de}from"./primevue-C1czeke6.js";import{B as ce}from"./BerandaService-DEQDdMi5.js";import{$ as pe,Z as ve}from"./@tato30-jtMM0DHN.js";import{r as o,o as fe,h as me,w as T,c as p,d as t,p as n,C as v,F as Y,b as f,E as _e,l as ge,z as m,H as j,G as ye,M as h}from"./@vue-DJvNHAu1.js";import"./@primeuix-D41C3NYc.js";import"./@primevue-BoKC10nk.js";import"./pdfjs-dist-C47rEeyv.js";const xe={class:"flex flex-col"},be={class:"flex flex-wrap gap-2"},he={class:"grid grid-cols-12 gap-0"},we=["onClick"],ke={class:"bg-surface-50 flex justify-center rounded"},Ve={class:"relative mx-auto"},De=["src","alt"],Ce={key:0,class:"pi pi-spin pi-clock absolute text-green-500 text-sm",style:{right:"4px",top:"4px"}},$e={class:"pt-4"},Be={class:"flex flex-row justify-between items-start gap-1"},Le={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},Ie={class:"flex flex-col gap-2"},Se={class:"text-sm font-medium mt-3"},Ne={class:"flex flex-col"},Ue={class:"flex items-center justify-between px-6 pt-4 shrink-0"},Fe={class:"inline-flex items-center gap-2"},Te={class:"font-semibold text-md text-primary"},Ye={class:"flex-1 overflow-y-auto",style:{"padding-top":"15px","padding-left":"10px","padding-right":"10px"}},je={key:0},Pe={key:1},Ee={class:"pdf-container",style:{"overflow-y":"auto","max-height":"80vh"}},ze={key:2},Ae={class:"inline-flex justify-center gap-2",style:{padding:"10px"}},He={class:"font-semibold text-md text-primary"},Me={class:"font-semibold text-md text-primary"},Ke={class:"mt-auto layout-footer"},Ze={style:{"padding-left":"2px","padding-right":"2px"}},Ge={class:"flex items-center gap-2 mb-8"},Oe={class:"flex justify-end gap-2"},w="BOMBERAY",st={__name:"BomberayDoc",setup(Re){const k=o(null),b=o(null),P=o(null),_=o(null),E=o(null),i=o(1),z=o("grid"),g=o(null),B=o(null),L=o(null),V=o(!1),A=o(12),H=o([{icon:"pi pi-filter-fill",value:"Left"}]),M=o([{icon:"pi pi-refresh",value:"Left"}]),y=o(!1),D=o(""),C=o(!1),{pdf:K,pages:I}=pe(D),$=o([]),c=o({start:null,end:null});fe(()=>{ce.getBerandas().then(l=>{k.value=l,b.value=l.filter(a=>a.category===w),P.value=[l,[]],E.value=l;const e=l.filter(a=>a.category===w),u=Array.from(new Set(e.map(a=>a.year))).sort((a,r)=>parseInt(a,10)-parseInt(r,10)).map(a=>({name:a,value:a}));$.value=u})});const Z=me(()=>[...$.value].reverse()),G=l=>{const e=new Date(l.replace(" ","T")+":00");return(new Date-e)/(1e3*60*60)<=24},O=(l,e)=>{_.value=l,V.value=!0,i.value=1};T(_,async l=>{l&&l.pdfile&&(C.value=!0,D.value=l.pdfile,C.value=!1)});const R=l=>{switch(l.lang){case"EN":return"success";case"DUTCH":return"warn";case"ID":return"danger";default:return null}},W=()=>{y.value=!0};T(g,l=>{S()});const S=()=>{let l=k.value;g.value&&(l=l.filter(a=>a.title.toLowerCase().includes(g.value.toLowerCase())));const e=c.value.start?parseInt(c.value.start,10):null,u=c.value.end?parseInt(c.value.end,10):null;(e||u)&&(l=l.filter(a=>{const r=parseInt(a.year,10);return e&&u?r>=e&&r<=u:e?r>=e:u?r<=u:!0})),l=l.filter(a=>a.category===w),l=l.sort((a,r)=>parseInt(a.year,10)-parseInt(r.year,10)),b.value=l,y.value=!1},q=()=>{b.value=k.value.filter(l=>l.category===w),g.value=null,c.value={start:null,end:null}};return(l,e)=>{const u=ne,a=ie,r=oe,N=re,J=ae,Q=te,x=ue,X=le,U=de,ee=se;return f(),p(Y,null,[t("div",xe,[n(Q,{value:b.value,layout:z.value,paginator:!0,rows:A.value,pageLinkSize:3},{header:v(()=>[t("div",be,[n(r,null,{default:v(()=>[n(u,{class:"pi pi-search"}),n(a,{modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=s=>g.value=s),placeholder:"Search"},null,8,["modelValue"])]),_:1}),n(N,{modelValue:L.value,"onUpdate:modelValue":e[1]||(e[1]=s=>L.value=s),options:M.value,onChange:q,optionLabel:"value",dataKey:"value"},{option:v(s=>[t("i",{class:j(s.option.icon)},null,2)]),_:1},8,["modelValue","options"]),n(N,{modelValue:B.value,"onUpdate:modelValue":e[2]||(e[2]=s=>B.value=s),options:H.value,onChange:W,optionLabel:"value",dataKey:"value","aria-labelledby":"custom"},{option:v(s=>[t("i",{class:j(s.option.icon)},null,2)]),_:1},8,["modelValue","options"])])]),grid:v(s=>[t("div",he,[(f(!0),p(Y,null,_e(s.items,(d,F)=>(f(),p("div",{key:F,class:"col-span-6 sm:col-span-3 lg:col-span-2 p-2"},[t("div",{class:"p-1 border border-surface-200 dark:border-surface-700 bg-surface-0 dark:bg-surface-900 rounded flex flex-col",onClick:We=>O(d,F)},[t("div",ke,[t("div",Ve,[t("img",{class:"rounded w-full",src:`${d.image}`,alt:d.title,style:{"max-width":"100%"}},null,8,De),G(d.datetime)?(f(),p("span",Ce)):ge("",!0),n(J,{value:d.lang,severity:R(d),class:"absolute dark:!bg-surface-900",style:{left:"4px",top:"4px"}},null,8,["value","severity"])])]),t("div",$e,[t("div",Be,[t("div",null,[t("span",Le,m(d.author),1)])]),t("div",Ie,[t("div",Se,m(d.title),1)])])],8,we)]))),128))])]),_:1},8,["value","layout","rows"])]),n(X,{visible:V.value,"onUpdate:visible":e[5]||(e[5]=s=>V.value=s),position:"top",style:{height:"100%"}},{container:v(({closeCallback:s})=>[t("div",Ne,[t("div",Ue,[t("span",Fe,[t("span",Te,m(_.value?.title||"No Title"),1)]),t("span",null,[n(x,{type:"button",onClick:s,icon:"pi pi-times",rounded:"",outlined:""},null,8,["onClick"])])])]),t("div",Ye,[C.value?(f(),p("div",je,e[10]||(e[10]=[t("p",{class:"text-center"},[t("i",{class:"pi pi-spin pi-spinner",style:{"font-size":"2rem"}}),t("br"),ye("Loading PDF... ")],-1)]))):D.value&&_.value?.pdfile?(f(),p("div",Pe,[t("div",Ee,[n(h(ve),{pdf:h(K),page:i.value,"fit-parent":"",onLoaded:l.onLoaded},null,8,["pdf","page","onLoaded"])])])):(f(),p("div",ze,e[11]||(e[11]=[t("p",{class:"text-center"},"PDF not available for this item.",-1)])))]),t("span",Ae,[t("span",He,"Author : "+m(_.value?.author||"No Title")+",",1),t("span",Me,m(_.value?.year||"No Title"),1)]),t("div",Ke,[n(x,{rounded:"",label:"Prev",icon:"pi pi-arrow-left",outlined:"",onClick:e[3]||(e[3]=d=>i.value=i.value>1?i.value-1:i.value)}),t("span",Ze,m(i.value)+" / "+m(h(I)),1),n(x,{rounded:"",label:"Next",icon:"pi pi-arrow-right",outlined:"",onClick:e[4]||(e[4]=d=>i.value=i.value<h(I)?i.value+1:i.value)})])]),_:1},8,["visible"]),n(ee,{visible:y.value,"onUpdate:visible":e[9]||(e[9]=s=>y.value=s),modal:"",header:"Filter Data",style:{width:"25rem"}},{default:v(()=>[t("div",Ge,[n(U,{modelValue:c.value.start,"onUpdate:modelValue":e[6]||(e[6]=s=>c.value.start=s),options:$.value,optionLabel:"name",optionValue:"value",placeholder:"Start Year",class:"w-full md:w-56"},null,8,["modelValue","options"]),e[12]||(e[12]=t("span",{class:"text-surface-500"},"to",-1)),n(U,{modelValue:c.value.end,"onUpdate:modelValue":e[7]||(e[7]=s=>c.value.end=s),options:Z.value,optionLabel:"name",optionValue:"value",placeholder:"End Year",class:"w-full md:w-56"},null,8,["modelValue","options"])]),t("div",Oe,[n(x,{type:"button",label:"Batal",severity:"secondary",onClick:e[8]||(e[8]=s=>y.value=!1)}),n(x,{type:"button",label:"Filter",onClick:S})])]),_:1},8,["visible"])],64)}}};export{st as default};
