import{a as te,b as se,c as le,d as ae,e as oe,f as ne,g as ie,h as re,i as ue,j as de}from"./primevue-C1czeke6.js";import{B as ce}from"./BerandaService-DEQDdMi5.js";import{$ as pe,Z as ve}from"./@tato30-jtMM0DHN.js";import{r as o,o as fe,h as me,w as T,c as v,d as t,p as n,C as f,F as j,b as m,E as _e,l as xe,z as p,H as Y,G as ge,M as h}from"./@vue-DJvNHAu1.js";import"./@primeuix-D41C3NYc.js";import"./@primevue-BoKC10nk.js";import"./pdfjs-dist-C47rEeyv.js";const ye={class:"flex flex-col"},be={class:"flex flex-wrap gap-2"},he={class:"grid grid-cols-12 gap-0"},we=["onClick"],ke={class:"bg-surface-50 flex justify-center rounded"},Ve={class:"relative mx-auto"},De=["src","alt"],Ce={key:0,class:"pi pi-spin pi-clock absolute text-green-500 text-sm",style:{right:"4px",top:"4px"}},$e={class:"pt-4"},Le={class:"flex flex-row justify-between items-start gap-1"},Be={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},Ie={class:"p-1",style:{"border-radius":"15px"}},Se={class:"bg-surface-0 flex items-center gap-2 justify-center py-1 px-2",style:{"border-radius":"15px","box-shadow":`0px 1px 2px 0px rgba(0, 0, 0, 0.04),
                                                    0px 1px 2px 0px rgba(0, 0, 0, 0.06)`}},Ne={class:"text-surface-900 text-sm"},Ue={class:"flex flex-col gap-2"},Fe={class:"text-sm font-medium mt-3"},Te={class:"flex flex-col"},je={class:"flex items-center justify-between px-6 pt-4 shrink-0"},Ye={class:"inline-flex items-center gap-2"},Pe={class:"font-semibold text-md text-primary"},ze={class:"flex-1 overflow-y-auto",style:{"padding-top":"15px","padding-left":"10px","padding-right":"10px"}},Ee={key:0},Me={key:1},He={class:"pdf-container",style:{"overflow-y":"auto","max-height":"80vh"}},Ae={key:2},Ke={class:"inline-flex justify-center gap-2",style:{padding:"10px"}},Ze={class:"font-semibold text-md text-primary"},Ge={class:"font-semibold text-md text-primary"},We={class:"mt-auto layout-footer"},qe={style:{"padding-left":"2px","padding-right":"2px"}},Je={class:"flex items-center gap-2 mb-8"},Oe={class:"flex justify-end gap-2"},w="Melanesia",nt={__name:"MelanesiaDoc",setup(Qe){const k=o(null),b=o(null),P=o(null),_=o(null),z=o(null),i=o(1),E=o("grid"),x=o(null),L=o(null),B=o(null),V=o(!1),M=o(12),H=o([{icon:"pi pi-filter-fill",value:"Left"}]),A=o([{icon:"pi pi-refresh",value:"Left"}]),g=o(!1),D=o(""),C=o(!1),{pdf:K,pages:I}=pe(D),$=o([]),c=o({start:null,end:null});fe(()=>{ce.getBerandas().then(s=>{k.value=s,b.value=s.filter(a=>a.category===w),P.value=[s,[]],z.value=s;const e=s.filter(a=>a.category===w),d=Array.from(new Set(e.map(a=>a.year))).sort((a,r)=>parseInt(a,10)-parseInt(r,10)).map(a=>({name:a,value:a}));$.value=d})});const Z=me(()=>[...$.value].reverse()),G=s=>{const e=new Date(s.replace(" ","T")+":00");return(new Date-e)/(1e3*60*60)<=24},W=(s,e)=>{_.value=s,V.value=!0,i.value=1};T(_,async s=>{s&&s.pdfile&&(C.value=!0,D.value=s.pdfile,C.value=!1)});const q=s=>{switch(s.lang){case"EN":return"success";case"DUTCH":return"warn";case"ID":return"danger";default:return null}},J=()=>{g.value=!0};T(x,s=>{S()});const S=()=>{let s=k.value;x.value&&(s=s.filter(a=>a.title.toLowerCase().includes(x.value.toLowerCase())));const e=c.value.start?parseInt(c.value.start,10):null,d=c.value.end?parseInt(c.value.end,10):null;(e||d)&&(s=s.filter(a=>{const r=parseInt(a.year,10);return e&&d?r>=e&&r<=d:e?r>=e:d?r<=d:!0})),s=s.filter(a=>a.category===w),s=s.sort((a,r)=>parseInt(a.year,10)-parseInt(r.year,10)),b.value=s,g.value=!1},O=()=>{b.value=k.value.filter(s=>s.category===w),x.value=null,c.value={start:null,end:null}};return(s,e)=>{const d=ne,a=ie,r=oe,N=re,Q=ae,R=te,y=ue,X=se,U=de,ee=le;return m(),v(j,null,[t("div",ye,[n(R,{value:b.value,layout:E.value,paginator:!0,rows:M.value,pageLinkSize:3},{header:f(()=>[t("div",be,[n(r,null,{default:f(()=>[n(d,{class:"pi pi-search"}),n(a,{modelValue:x.value,"onUpdate:modelValue":e[0]||(e[0]=l=>x.value=l),placeholder:"Search"},null,8,["modelValue"])]),_:1}),n(N,{modelValue:B.value,"onUpdate:modelValue":e[1]||(e[1]=l=>B.value=l),options:A.value,onChange:O,optionLabel:"value",dataKey:"value"},{option:f(l=>[t("i",{class:Y(l.option.icon)},null,2)]),_:1},8,["modelValue","options"]),n(N,{modelValue:L.value,"onUpdate:modelValue":e[2]||(e[2]=l=>L.value=l),options:H.value,onChange:J,optionLabel:"value",dataKey:"value","aria-labelledby":"custom"},{option:f(l=>[t("i",{class:Y(l.option.icon)},null,2)]),_:1},8,["modelValue","options"])])]),grid:f(l=>[t("div",he,[(m(!0),v(j,null,_e(l.items,(u,F)=>(m(),v("div",{key:F,class:"col-span-6 sm:col-span-3 lg:col-span-2 p-2"},[t("div",{class:"p-1 border border-surface-200 dark:border-surface-700 bg-surface-0 dark:bg-surface-900 rounded flex flex-col",onClick:Re=>W(u,F)},[t("div",ke,[t("div",Ve,[t("img",{class:"rounded w-full",src:`${u.image}`,alt:u.title,style:{"max-width":"100%"}},null,8,De),G(u.datetime)?(m(),v("span",Ce)):xe("",!0),n(Q,{value:u.lang,severity:q(u),class:"absolute dark:!bg-surface-900",style:{left:"4px",top:"4px"}},null,8,["value","severity"])])]),t("div",$e,[t("div",Le,[t("div",null,[t("span",Be,p(u.author),1)]),t("div",Ie,[t("div",Se,[t("span",Ne,p(u.year),1)])])]),t("div",Ue,[t("div",Fe,p(u.title),1)])])],8,we)]))),128))])]),_:1},8,["value","layout","rows"])]),n(X,{visible:V.value,"onUpdate:visible":e[5]||(e[5]=l=>V.value=l),position:"top",style:{height:"100%"}},{container:f(({closeCallback:l})=>[t("div",Te,[t("div",je,[t("span",Ye,[t("span",Pe,p(_.value?.title||"No Title"),1)]),t("span",null,[n(y,{type:"button",onClick:l,icon:"pi pi-times",rounded:"",outlined:""},null,8,["onClick"])])])]),t("div",ze,[C.value?(m(),v("div",Ee,e[10]||(e[10]=[t("p",{class:"text-center"},[t("i",{class:"pi pi-spin pi-spinner",style:{"font-size":"2rem"}}),t("br"),ge("Loading PDF... ")],-1)]))):D.value&&_.value?.pdfile?(m(),v("div",Me,[t("div",He,[n(h(ve),{pdf:h(K),page:i.value,"fit-parent":"",onLoaded:s.onLoaded},null,8,["pdf","page","onLoaded"])])])):(m(),v("div",Ae,e[11]||(e[11]=[t("p",{class:"text-center"},"PDF not available for this item.",-1)])))]),t("span",Ke,[t("span",Ze,"Author : "+p(_.value?.author||"No Title")+",",1),t("span",Ge,p(_.value?.year||"No Title"),1)]),t("div",We,[n(y,{rounded:"",label:"Prev",icon:"pi pi-arrow-left",outlined:"",onClick:e[3]||(e[3]=u=>i.value=i.value>1?i.value-1:i.value)}),t("span",qe,p(i.value)+" / "+p(h(I)),1),n(y,{rounded:"",label:"Next",icon:"pi pi-arrow-right",outlined:"",onClick:e[4]||(e[4]=u=>i.value=i.value<h(I)?i.value+1:i.value)})])]),_:1},8,["visible"]),n(ee,{visible:g.value,"onUpdate:visible":e[9]||(e[9]=l=>g.value=l),modal:"",header:"Filter Data",style:{width:"25rem"}},{default:f(()=>[t("div",Je,[n(U,{modelValue:c.value.start,"onUpdate:modelValue":e[6]||(e[6]=l=>c.value.start=l),options:$.value,optionLabel:"name",optionValue:"value",placeholder:"Start Year",class:"w-full md:w-56"},null,8,["modelValue","options"]),e[12]||(e[12]=t("span",{class:"text-surface-500"},"to",-1)),n(U,{modelValue:c.value.end,"onUpdate:modelValue":e[7]||(e[7]=l=>c.value.end=l),options:Z.value,optionLabel:"name",optionValue:"value",placeholder:"End Year",class:"w-full md:w-56"},null,8,["modelValue","options"])]),t("div",Oe,[n(y,{type:"button",label:"Batal",severity:"secondary",onClick:e[8]||(e[8]=l=>g.value=!1)}),n(y,{type:"button",label:"Filter",onClick:S})])]),_:1},8,["visible"])],64)}}};export{nt as default};
