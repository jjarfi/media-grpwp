import{a as ee,b as te,c as se,d as le,e as ae,f as oe,g as ne,h as ie,i as re,j as ue}from"./primevue-C1czeke6.js";import{B as de}from"./BerandaService-DEQDdMi5.js";import{$ as ce,Z as pe}from"./@tato30-jtMM0DHN.js";import{r as a,o as ve,h as fe,w as F,c as v,d as t,p as o,C as f,F as T,b as m,E as me,l as _e,z as p,H as j,G as xe,M as w}from"./@vue-DJvNHAu1.js";import"./@primeuix-D41C3NYc.js";import"./@primevue-BoKC10nk.js";import"./pdfjs-dist-C47rEeyv.js";const ge={class:"flex flex-col"},ye={class:"flex flex-wrap gap-2"},be={class:"grid grid-cols-12 gap-0"},he=["onClick"],we={class:"bg-surface-50 flex justify-center rounded"},ke={class:"relative mx-auto"},Ve=["src","alt"],De={key:0,class:"pi pi-spin pi-clock absolute text-green-500 text-sm",style:{right:"4px",top:"4px"}},Ce={class:"pt-4"},$e={class:"flex flex-row justify-between items-start gap-1"},Le={class:"font-medium text-surface-500 dark:text-surface-400 text-sm"},Be={class:"p-1",style:{"border-radius":"15px"}},Ie={class:"bg-surface-0 flex items-center gap-2 justify-center py-1 px-2",style:{"border-radius":"15px","box-shadow":`0px 1px 2px 0px rgba(0, 0, 0, 0.04),
                                                    0px 1px 2px 0px rgba(0, 0, 0, 0.06)`}},Se={class:"text-surface-900 text-sm"},Ne={class:"flex flex-col gap-2"},Ue={class:"text-sm font-medium mt-3"},Fe={class:"flex flex-col"},Te={class:"flex items-center justify-between px-6 pt-4 shrink-0"},je={class:"inline-flex items-center gap-2"},Ye={class:"font-semibold text-md text-primary"},Pe={class:"flex-1 overflow-y-auto",style:{"padding-top":"15px","padding-left":"10px","padding-right":"10px"}},ze={key:0},Ee={key:1},He={class:"pdf-container",style:{"overflow-y":"auto","max-height":"80vh"}},Ae={key:2},Ke={class:"inline-flex justify-center gap-2",style:{padding:"10px"}},Me={class:"font-semibold text-md text-primary"},Ze={class:"font-semibold text-md text-primary"},Ge={class:"mt-auto layout-footer"},We={style:{"padding-left":"2px","padding-right":"2px"}},qe={class:"flex items-center gap-2 mb-8"},Je={class:"flex justify-end gap-2"},ot={__name:"Dashboard",setup(Oe){const b=a(null),h=a(null),Y=a(null),_=a(null),P=a(null),i=a(1),z=a("grid"),x=a(null),$=a(null),L=a(null),k=a(!1),E=a(12),H=a([{icon:"pi pi-filter-fill",value:"Left"}]),A=a([{icon:"pi pi-refresh",value:"Left"}]),g=a(!1),V=a(""),D=a(!1),{pdf:K,pages:B}=ce(V),C=a([]),d=a({start:null,end:null});ve(()=>{de.getBerandas().then(s=>{b.value=s,h.value=b.value,Y.value=[s,[]],P.value=s;const e=Array.from(new Set(s.map(n=>n.year))).sort((n,u)=>parseInt(n,10)-parseInt(u,10)).map(n=>({name:n,value:n}));C.value=e})});const M=fe(()=>[...C.value].reverse()),Z=s=>{const e=new Date(s.replace(" ","T")+":00");return(new Date-e)/(1e3*60*60)<=24},G=(s,e)=>{_.value=s,k.value=!0,i.value=1};F(_,async s=>{s&&s.pdfile&&(D.value=!0,V.value=s.pdfile,D.value=!1)});const W=s=>{switch(s.lang){case"EN":return"success";case"DUTCH":return"warn";case"ID":return"danger";default:return null}},q=()=>{g.value=!0};F(x,s=>{I()});const I=()=>{let s=b.value;x.value&&(s=s.filter(u=>u.title.toLowerCase().includes(x.value.toLowerCase())));const e=d.value.start?parseInt(d.value.start,10):null,n=d.value.end?parseInt(d.value.end,10):null;(e||n)&&(s=s.filter(u=>{const c=parseInt(u.year,10);return e&&n?c>=e&&c<=n:e?c>=e:n?c<=n:!0})),s=s.sort((u,c)=>parseInt(u.year,10)-parseInt(c.year,10)),h.value=s,g.value=!1},J=()=>{h.value=b.value,x.value=null,d.value={start:null,end:null}};return(s,e)=>{const n=oe,u=ne,c=ae,S=ie,O=le,Q=ee,y=re,R=te,N=ue,X=se;return m(),v(T,null,[t("div",ge,[o(Q,{value:h.value,layout:z.value,paginator:!0,rows:E.value,pageLinkSize:3},{header:f(()=>[t("div",ye,[o(c,null,{default:f(()=>[o(n,{class:"pi pi-search"}),o(u,{modelValue:x.value,"onUpdate:modelValue":e[0]||(e[0]=l=>x.value=l),placeholder:"Search"},null,8,["modelValue"])]),_:1}),o(S,{modelValue:L.value,"onUpdate:modelValue":e[1]||(e[1]=l=>L.value=l),options:A.value,onChange:J,optionLabel:"value",dataKey:"value"},{option:f(l=>[t("i",{class:j(l.option.icon)},null,2)]),_:1},8,["modelValue","options"]),o(S,{modelValue:$.value,"onUpdate:modelValue":e[2]||(e[2]=l=>$.value=l),options:H.value,onChange:q,optionLabel:"value",dataKey:"value","aria-labelledby":"custom"},{option:f(l=>[t("i",{class:j(l.option.icon)},null,2)]),_:1},8,["modelValue","options"])])]),grid:f(l=>[t("div",be,[(m(!0),v(T,null,me(l.items,(r,U)=>(m(),v("div",{key:U,class:"col-span-6 sm:col-span-3 lg:col-span-2 p-2"},[t("div",{class:"p-1 border border-surface-200 dark:border-surface-700 bg-surface-0 dark:bg-surface-900 rounded flex flex-col",onClick:Qe=>G(r,U)},[t("div",we,[t("div",ke,[t("img",{class:"rounded w-full",src:`${r.image}`,alt:r.title,style:{"max-width":"100%"}},null,8,Ve),Z(r.datetime)?(m(),v("span",De)):_e("",!0),o(O,{value:r.lang,severity:W(r),class:"absolute dark:!bg-surface-900",style:{left:"4px",top:"4px"}},null,8,["value","severity"])])]),t("div",Ce,[t("div",$e,[t("div",null,[t("span",Le,p(r.category),1)]),t("div",Be,[t("div",Ie,[t("span",Se,p(r.year),1)])])]),t("div",Ne,[t("div",Ue,p(r.title),1)])])],8,he)]))),128))])]),_:1},8,["value","layout","rows"])]),o(R,{visible:k.value,"onUpdate:visible":e[5]||(e[5]=l=>k.value=l),position:"top",style:{height:"100%"}},{container:f(({closeCallback:l})=>[t("div",Fe,[t("div",Te,[t("span",je,[t("span",Ye,p(_.value?.title||"No Title"),1)]),t("span",null,[o(y,{type:"button",onClick:l,icon:"pi pi-times",rounded:"",outlined:""},null,8,["onClick"])])])]),t("div",Pe,[D.value?(m(),v("div",ze,e[10]||(e[10]=[t("p",{class:"text-center"},[t("i",{class:"pi pi-spin pi-spinner",style:{"font-size":"2rem"}}),t("br"),xe("Loading PDF... ")],-1)]))):V.value&&_.value?.pdfile?(m(),v("div",Ee,[t("div",He,[o(w(pe),{pdf:w(K),page:i.value,"fit-parent":"",onLoaded:s.onLoaded},null,8,["pdf","page","onLoaded"])])])):(m(),v("div",Ae,e[11]||(e[11]=[t("p",{class:"text-center"},"PDF not available for this item.",-1)])))]),t("span",Ke,[t("span",Me,"Author : "+p(_.value?.author||"No Title")+",",1),t("span",Ze,p(_.value?.year||"No Title"),1)]),t("div",Ge,[o(y,{rounded:"",label:"Prev",icon:"pi pi-arrow-left",outlined:"",onClick:e[3]||(e[3]=r=>i.value=i.value>1?i.value-1:i.value)}),t("span",We,p(i.value)+" / "+p(w(B)),1),o(y,{rounded:"",label:"Next",icon:"pi pi-arrow-right",outlined:"",onClick:e[4]||(e[4]=r=>i.value=i.value<w(B)?i.value+1:i.value)})])]),_:1},8,["visible"]),o(X,{visible:g.value,"onUpdate:visible":e[9]||(e[9]=l=>g.value=l),modal:"",header:"Filter Data",style:{width:"25rem"}},{default:f(()=>[t("div",qe,[o(N,{modelValue:d.value.start,"onUpdate:modelValue":e[6]||(e[6]=l=>d.value.start=l),options:C.value,optionLabel:"name",optionValue:"value",placeholder:"Start Year",class:"w-full md:w-56"},null,8,["modelValue","options"]),e[12]||(e[12]=t("span",{class:"text-surface-500"},"to",-1)),o(N,{modelValue:d.value.end,"onUpdate:modelValue":e[7]||(e[7]=l=>d.value.end=l),options:M.value,optionLabel:"name",optionValue:"value",placeholder:"End Year",class:"w-full md:w-56"},null,8,["modelValue","options"])]),t("div",Je,[o(y,{type:"button",label:"Batal",severity:"secondary",onClick:e[8]||(e[8]=l=>g.value=!1)}),o(y,{type:"button",label:"Filter",onClick:I})])]),_:1},8,["visible"])],64)}}};export{ot as default};
